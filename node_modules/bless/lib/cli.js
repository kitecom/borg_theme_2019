'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _promise = require('babel-runtime/core-js/promise');

var _promise2 = _interopRequireDefault(_promise);

exports.default = cliExeute;

var _chalk = require('chalk');

var _chalk2 = _interopRequireDefault(_chalk);

var _yargs = require('yargs');

var _yargs2 = _interopRequireDefault(_yargs);

var _parseCliArgs = require('./parse-cli-args');

var _parseCliArgs2 = _interopRequireDefault(_parseCliArgs);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function cliExeute(argv) {
  var command = void 0;

  try {
    command = (0, _parseCliArgs2.default)(argv);
  } catch (err) {
    console.log(_chalk2.default.red('Failed: ' + err.toString()));
    if (err.stack) {
      console.log(_chalk2.default.red(err.stack));
    }
    console.log('');
    _yargs2.default.showHelp();
    return _promise2.default.resolve(1);
  }

  return command.execute(command.options);
} /* eslint no-process-exit: 0 */

module.exports = exports['default'];